<!--
 * @Author: “chapaofan-zy” “1095004630@qq.com”
 * @Date: 2023-07-14 14:18:11
 * @LastEditors: “chapaofan-zy” “1095004630@qq.com”
 * @LastEditTime: 2023-07-14 14:57:55
 * @Description: 茶泡饭的完美代码
-->

## 输入 url 后发生了什么

- url 解析
  - 检查是否为有效 url，无效则使用默认搜索引擎搜索内容
- DNS 查询
  - 查看是否有缓存
  - 无缓存则依次查询 根域名服务器、顶级域名服务器、权威域名服务器，最后获取到 ip 地址
- TCP 连接
  - 三次握手建立连接
- 发送 http 请求
  - https 使用 SSL 和 TLS 协议加密
  - 发送初始的 http GET 请求
  - http 请求报文：请求行（请求方法、url、协议版本）；请求头（属性名：属性值）服务器据此获取客户端信息；请求体（键值对）
- 服务器响应请求
  - http 响应报文：响应行（协议版本、状态码、状态描述）；响应头（属性名：属性值）；响应体（内容）
- 页面渲染

  - 查看响应头信息，根据不同的指示做对应处理，比如重定向，存储 cookie，解压 gzip，缓存资源等等

  - 解析 HTML，生成 DOM 树
    - 遇到 script，defer：下载直到 HTML 解析完执行；async：在下载完后立即执行（多个 async，谁下载完就立即执行，完全独立）
  - 解析 CSS，生成 CSS 树
  - 合并 DOM 树和 CSS 树，生成渲染树
  - 布局渲染树，负责元素尺寸、位置计算
  - 绘制渲染树，绘制页面像素信息
  - 将各层合并显示
